#include "backend/c_runtime.c"

Value digaOla();
Value fib();
Value makeCounter();
Value count();
Value Bolo_init();
Value Bolo_assar();
Value Bolo() {
  Value inst = new_object("Bolo");
  set_attr(inst, "init", new_native(Bolo_init));
  set_attr(inst, "assar", new_native(Bolo_assar));
  push(inst);
  Bolo_init();
  return inst;
}

Value digaOla() {
  Value primeiro_0, ultimo_1, t0, t1, t2, t3;
  primeiro_0 = pop();
  ultimo_1 = pop();
  t0 = op_add(new_string("Olá, "), primeiro_0);
  t1 = op_add(t0, new_string(" "));
  t2 = op_add(t1, ultimo_1);
  t3 = op_add(t2, new_string("!"));
  print_value(t3);
  return new_nil();
  return new_nil();
}

Value fib() {
  Value n_2, t4, t5, t6, t7, t8, t9;
  n_2 = pop();
  t4 = op_le(n_2, new_number(1.00));
  if (!is_truthy(t4)) goto L0;
  return n_2;
  goto L1;
  L0:
  ;
  L1:
  ;
  t5 = op_sub(n_2, new_number(2.00));
  push(t5);
  t6 = fib();
  t7 = op_sub(n_2, new_number(1.00));
  push(t7);
  t8 = fib();
  t9 = op_add(t6, t8);
  return t9;
  return new_nil();
  return new_nil();
}

Value makeCounter() {
  Value i_3;
  i_3 = new_number(0.00);
  return new_native(count);
  return new_nil();
  return new_nil();
}

Value count() {
  Value t10, i;
  t10 = op_add(i, new_number(1.00));
  i = t10;
  print_value(i);
  return new_nil();
  return new_nil();
}

Value Bolo_init() {
  Value this, sabor_4;
  this = pop();
  sabor_4 = pop();
  set_attr(this, "sabor", sabor_4);
  return new_nil();
  return new_nil();
}

Value Bolo_assar() {
  Value this, t11, t12, t13;
  this = pop();
  t11 = get_attr(this, "sabor");
  t12 = op_add(new_string("Assando um bolo de "), t11);
  t13 = op_add(t12, new_string("."));
  print_value(t13);
  return new_nil();
  return new_nil();
}

int main() {
  Value t14, t15, t16, t17, t18, t19, t20, t21, t22, t23, t24, t25, t26, a_5, b_6, fora_7, dentro_8, cond_9, t_10, f_11, t27, t28, i_12, t29, t30, t31, j_13, t32, t33, t34, k_14, t35, t36, t37, t38, t39, t40, t41, counter_15, t42, t43, t44, meuBolo_16, t45, t46, t47, t48;
  print_value(new_string("--- Iniciando Testes Abrangentes ---"));
  print_value(new_string("--- Testando Literais e Expressões ---"));
  print_value(new_number(123.00));
  print_value(new_number(98.76));
  print_value(new_string("Olá, Lox!"));
  print_value(new_bool(1));
  print_value(new_bool(0));
  print_value(pop());
  t14 = op_mul(new_number(2.00), new_number(3.00));
  t15 = op_add(new_number(1.00), t14);
  print_value(t15);
  t16 = op_add(new_number(1.00), new_number(2.00));
  t17 = op_mul(t16, new_number(3.00));
  print_value(t17);
  t18 = op_div(new_number(10.00), new_number(5.00));
  t19 = op_sub(t18, new_number(2.00));
  print_value(t19);
  t20 = op_sub(new_number(5.00), new_number(2.00));
  t21 = op_sub(new_number(0), t20);
  print_value(t21);
  t22 = op_lt(new_number(1.00), new_number(2.00));
  print_value(t22);
  t23 = op_ge(new_number(1.00), new_number(2.00));
  print_value(t23);
  t24 = op_eq(new_string("a"), new_string("a"));
  print_value(t24);
  t25 = op_neq(new_string("a"), new_string("b"));
  print_value(t25);
  t26 = op_eq(new_nil(), new_nil());
  print_value(t26);
  print_value(new_string("--- Testando Variáveis e Atribuição ---"));
  a_5 = new_string("valor inicial");
  print_value(a_5);
  a_5 = new_string("valor reatribuído");
  print_value(a_5);
  b_6 = new_nil();
  print_value(b_6);
  print_value(new_string("--- Testando Estruturas de Controle ---"));
  fora_7 = new_string("global");
  dentro_8 = new_string("local");
  print_value(fora_7);
  print_value(dentro_8);
  print_value(fora_7);
  cond_9 = new_bool(1);
  if (!is_truthy(cond_9)) goto L2;
  print_value(new_string("Condição verdadeira"));
  goto L3;
  L2:
  ;
  print_value(new_string("Condição falsa"));
  L3:
  ;
  if (!is_truthy(new_bool(0))) goto L4;
  print_value(new_string("Não deve aparecer"));
  goto L5;
  L4:
  ;
  L5:
  ;
  t_10 = new_bool(1);
  f_11 = new_bool(0);
  t27 = op_and(t_10, f_11);
  if (!is_truthy(t27)) goto L6;
  print_value(new_string("Não deve acontecer (AND)"));
  goto L7;
  L6:
  ;
  L7:
  ;
  t28 = op_or(t_10, f_11);
  if (!is_truthy(t28)) goto L8;
  print_value(new_string("Deve acontecer (OR)"));
  goto L9;
  L8:
  ;
  L9:
  ;
  i_12 = new_number(0.00);
  L10:
  ;
  t29 = op_lt(i_12, new_number(3.00));
  if (!is_truthy(t29)) goto L11;
  t30 = op_add(new_string("while: "), i_12);
  print_value(t30);
  t31 = op_add(i_12, new_number(1.00));
  i_12 = t31;
  goto L10;
  L11:
  ;
  j_13 = new_number(0.00);
  L12:
  ;
  t32 = op_lt(j_13, new_number(3.00));
  if (!is_truthy(t32)) goto L13;
  t33 = op_add(new_string("for: "), j_13);
  print_value(t33);
  t34 = op_add(j_13, new_number(1.00));
  j_13 = t34;
  goto L12;
  L13:
  ;
  k_14 = new_number(0.00);
  L14:
  ;
  t35 = op_lt(k_14, new_number(2.00));
  if (!is_truthy(t35)) goto L15;
  t36 = op_add(new_string("for sem cláusulas: "), k_14);
  print_value(t36);
  t37 = op_add(k_14, new_number(1.00));
  k_14 = t37;
  goto L14;
  L15:
  ;
  print_value(new_string("--- Testando Funções e Closures ---"));
  push(new_string("Pedro"));
  push(new_string("Italiano"));
  t38 = digaOla();
  push(new_number(7.00));
  t39 = fib();
  t40 = op_add(new_string("Fibonacci de 7 é: "), t39);
  print_value(t40);
  t41 = makeCounter();
  counter_15 = t41;
  t42 = call_value(counter_15);
  t43 = call_value(counter_15);
  print_value(new_string("--- Testando Classes e Instâncias ---"));
  push(new_string("chocolate"));
  t44 = Bolo();
  meuBolo_16 = t44;
  t45 = get_attr(meuBolo_16, "assar");
  t46 = call_value(t45);
  set_attr(meuBolo_16, "cobertura", new_string("granulado"));
  t47 = get_attr(meuBolo_16, "cobertura");
  t48 = op_add(new_string("Cobertura: "), t47);
  print_value(t48);
  return 0;
}
